{"remainingRequest":"/Users/tanwen/project/2022Froebel-h5/node_modules/babel-loader/lib/index.js!/Users/tanwen/project/2022Froebel-h5/src/common/js/utils.js","dependencies":[{"path":"/Users/tanwen/project/2022Froebel-h5/src/common/js/utils.js","mtime":1669172259216},{"path":"/Users/tanwen/project/2022Froebel-h5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tanwen/project/2022Froebel-h5/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCBKU0VuY3J5cHQgZnJvbSAnanNlbmNyeXB0JzsKdmFyIF9fcHVia2V5X18gPSAiTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUFoU2F6eGZZOEpDRFU0SWh6YTVWSUk3S3U0TnBBYnRZbjhNTWNIUUNHZGM4bmF1V0tPZUxxTU82K25yZXgrZWlyd285QWM0djJGWGxpM25iajNCYUNFTkhWT1VCZVZKUWJicGxVZVVTOHF1ZWkraWhnb1FNTGtjOHBMRE9kWXQrWGVIMzBYZVJ4SGZRTngyZng0eVVkV1ZMYnB3enVRSVA4QUNoOEx4M3JOdGVNVEFvc05WbmtCVVFBa0ozem11WTJOMDFJeGxCUndacGR4bUpQbVdhZktmb0Y1MzVVVktUK2JWOUNlN0xSeldCMWRGMlg5YjIvZWt0S2dMaWZRZDlvNmxhR1g3OWY5Q3NoWjl1MG5UM1hEdkhuQ0YzcktmTFlEZ05ma3djQ3JNV2V1SjdFVk1XNE14NVZqWTBwWTBteEZpK3Q2TkE1cmsvSUFQRHN0STNXMFFJREFRQUIiOyAvLyDlhajnq5nliqDlr4YKCmV4cG9ydCB2YXIgc2V0RW5jcnlwdCA9IGZ1bmN0aW9uIHNldEVuY3J5cHQoKSB7CiAgdmFyIHN0ciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7CiAgdmFyIHB1YmxpY0tleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogX19wdWJrZXlfXzsKICB2YXIgZW5jcnlwdCA9IG5ldyBKU0VuY3J5cHQoKTsKICBlbmNyeXB0LnNldFB1YmxpY0tleShwdWJsaWNLZXkpOwogIHJldHVybiBlbmNyeXB0LmVuY3J5cHQoc3RyKTsKfTsgLy8g5Yik5pat5piv5ZCm5Li65YWo56uZCgpleHBvcnQgdmFyIGlzQXBwID0gZnVuY3Rpb24gaXNBcHAoKSB7CiAgcmV0dXJuICF2ZXJpZnlVcmxQYXJhbXMoJ3VzZXJuYW1lJyk7Cn07IC8vIOmqjOivgXVybOS8oOWPggoKZXhwb3J0IHZhciB2ZXJpZnlVcmxQYXJhbXMgPSBmdW5jdGlvbiB2ZXJpZnlVcmxQYXJhbXMoa2V5KSB7CiAgdmFyIHVybCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbG9jYXRpb24uaHJlZjsKICBrZXkgPSBrZXkucmVwbGFjZSgvW1xbXF1dL2csICJcXCQmIik7CiAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoIltcXD8mXSIuY29uY2F0KGtleSwgIig9KFteJiNdKil8JnwjfCQpIikpOwogIHJldHVybiByZWcuZXhlYyh1cmwpOwp9OwpleHBvcnQgdmFyIGdldFVzZXJuYW1lQnlQbGF0Zm9ybSA9IGZ1bmN0aW9uIGdldFVzZXJuYW1lQnlQbGF0Zm9ybSgpIHsKICAvLyDliJ3lp4vljJbnlKjmiLflkI0KICB2YXIgdXNlcm5hbWUgPSAnJzsgLy8g5YWo56uZ6I635Y+W55So5oi35ZCNCgogIGlmIChpc0FwcCgpKSB7CiAgICBpZiAod2luZG93LmlvcykgewogICAgICB1c2VybmFtZSA9IHdpbmRvdy5pb3MuZ2V0VXNlck5hbWUoKTsKICAgIH0KCiAgICBpZiAod2luZG93LmFuZHJvaWQpIHsKICAgICAgdXNlcm5hbWUgPSB3aW5kb3cuYW5kcm9pZC5nZXRVc2VyTmFtZSgpOwogICAgfSAvLyDliqDlr4YKCgogICAgaWYgKHVzZXJuYW1lKSB7CiAgICAgIHVzZXJuYW1lID0gc2V0RW5jcnlwdCh1c2VybmFtZSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIC8vIGg16I635Y+W55So5oi35ZCNCiAgICB2YXIgcmVzdWx0ID0gdmVyaWZ5VXJsUGFyYW1zKCd1c2VybmFtZScpOwogICAgY29uc29sZS5sb2coJ3Jlc3VsdCcsIHJlc3VsdCk7IC8vIGlmIChyZXN1bHQgJiYgcmVzdWx0WzJdKSB7CiAgICAvLyAgIHVzZXJuYW1lID0gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdFsyXS5yZXBsYWNlKC9cKy9nLCAiICIpKQogICAgLy8gfQoKICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0WzJdKSB7CiAgICAgIHVzZXJuYW1lID0gcmVzdWx0WzJdOwoKICAgICAgaWYgKHVzZXJuYW1lLmluZGV4T2YoJz9ub0NhY2hlPScpID4gLTEpIHsKICAgICAgICB1c2VybmFtZSA9IHVzZXJuYW1lLnNwbGl0KCc/bm9DYWNoZT0nKVswXTsKICAgICAgfQogICAgfQoKICAgIGNvbnNvbGUubG9nKHVzZXJuYW1lKTsKICB9CgogIHJldHVybiB1c2VybmFtZTsKfTsKZXhwb3J0IHZhciBnZXRVcmxQYXJhbXMgPSBmdW5jdGlvbiBnZXRVcmxQYXJhbXMoKSB7CiAgdmFyIHVybCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbG9jYXRpb24uaHJlZjsKICB2YXIgUGFyYW1zID0ge307CiAgdXJsLnJlcGxhY2UoL1s/Jl0rKFtePSZdKyk9KFteJl0qKS9naSwgZnVuY3Rpb24gKG0sIGtleSwgdmFsdWUpIHsKICAgIFBhcmFtc1trZXldID0gdmFsdWU7CiAgfSk7CiAgcmV0dXJuIFBhcmFtczsKfTsgLy8g6I635Y+WdXJs5Lit55qE5Lyg5Y+CCgpleHBvcnQgdmFyIGdldFF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gZ2V0UXVlcnlTdHJpbmcobmFtZSkgewogIHZhciB1cmwgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGxvY2F0aW9uLmhyZWY7CiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xbXF1dL2csICJcXCQmIik7CiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgiWz8mXSIgKyBuYW1lICsgIig9KFteJiNdKil8JnwjfCQpIiksCiAgICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7CiAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDsKICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJzsKICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXCsvZywgIiAiKSk7Cn07"},{"version":3,"sources":["/Users/tanwen/project/2022Froebel-h5/src/common/js/utils.js"],"names":["JSEncrypt","__pubkey__","setEncrypt","str","publicKey","encrypt","setPublicKey","isApp","verifyUrlParams","key","url","location","href","replace","reg","RegExp","exec","getUsernameByPlatform","username","window","ios","getUserName","android","result","console","log","indexOf","split","getUrlParams","Params","m","value","getQueryString","name","regex","results","decodeURIComponent"],"mappings":";;;;;;AAAA,OAAOA,SAAP,MAAsB,WAAtB;AACA,IAAMC,UAAU,6YAAhB,C,CAEA;;AACA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAsC;AAAA,MAArCC,GAAqC,uEAA/B,EAA+B;AAAA,MAA3BC,SAA2B,uEAAfH,UAAe;AAC9D,MAAMI,OAAO,GAAG,IAAIL,SAAJ,EAAhB;AACAK,EAAAA,OAAO,CAACC,YAAR,CAAqBF,SAArB;AACA,SAAOC,OAAO,CAACA,OAAR,CAAgBF,GAAhB,CAAP;AACD,CAJM,C,CAKP;;AACA,OAAO,IAAMI,KAAK,GAAG,SAARA,KAAQ,GAAM;AACzB,SAAO,CAACC,eAAe,CAAC,UAAD,CAAvB;AACD,CAFM,C,CAGP;;AACA,OAAO,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,CAACC,GAAD,EAA8B;AAAA,MAAxBC,GAAwB,uEAAlBC,QAAQ,CAACC,IAAS;AAC3DH,EAAAA,GAAG,GAAGA,GAAG,CAACI,OAAJ,CAAY,SAAZ,EAAuB,MAAvB,CAAN;AACA,MAAMC,GAAG,GAAG,IAAIC,MAAJ,iBAAoBN,GAApB,uBAAZ;AACA,SAAOK,GAAG,CAACE,IAAJ,CAASN,GAAT,CAAP;AACD,CAJM;AAMP,OAAO,IAAMO,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AACzC;AACA,MAAIC,QAAQ,GAAG,EAAf,CAFyC,CAGzC;;AACA,MAAIX,KAAK,EAAT,EAAa;AACX,QAAIY,MAAM,CAACC,GAAX,EAAgB;AACdF,MAAAA,QAAQ,GAAGC,MAAM,CAACC,GAAP,CAAWC,WAAX,EAAX;AACD;;AACD,QAAIF,MAAM,CAACG,OAAX,EAAoB;AAClBJ,MAAAA,QAAQ,GAAGC,MAAM,CAACG,OAAP,CAAeD,WAAf,EAAX;AACD,KANU,CAOX;;;AACA,QAAIH,QAAJ,EAAc;AACZA,MAAAA,QAAQ,GAAGhB,UAAU,CAACgB,QAAD,CAArB;AACD;AAEF,GAZD,MAYO;AAAC;AACN,QAAIK,MAAM,GAAGf,eAAe,CAAC,UAAD,CAA5B;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,MAAtB,EAFK,CAGL;AACA;AACA;;AACA,QAAIA,MAAM,IAAIA,MAAM,CAAC,CAAD,CAApB,EAAyB;AACvBL,MAAAA,QAAQ,GAAGK,MAAM,CAAC,CAAD,CAAjB;;AACA,UAAIL,QAAQ,CAACQ,OAAT,CAAiB,WAAjB,IAAgC,CAAC,CAArC,EAAwC;AACtCR,QAAAA,QAAQ,GAAGA,QAAQ,CAACS,KAAT,CAAe,WAAf,EAA4B,CAA5B,CAAX;AACD;AACF;;AACDH,IAAAA,OAAO,CAACC,GAAR,CAAYP,QAAZ;AACD;;AACD,SAAOA,QAAP;AACD,CA/BM;AAiCP,OAAO,IAAMU,YAAY,GAAG,SAAfA,YAAe,GAAyB;AAAA,MAAxBlB,GAAwB,uEAAlBC,QAAQ,CAACC,IAAS;AACnD,MAAMiB,MAAM,GAAG,EAAf;AACAnB,EAAAA,GAAG,CAACG,OAAJ,CAAY,yBAAZ,EAAuC,UAAUiB,CAAV,EAAarB,GAAb,EAAkBsB,KAAlB,EAAyB;AAC9DF,IAAAA,MAAM,CAACpB,GAAD,CAAN,GAAcsB,KAAd;AACD,GAFD;AAGA,SAAOF,MAAP;AACD,CANM,C,CAQP;;AACA,OAAO,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAACC,IAAD,EAA+B;AAAA,MAAxBvB,GAAwB,uEAAlBC,QAAQ,CAACC,IAAS;AAC3DqB,EAAAA,IAAI,GAAGA,IAAI,CAACpB,OAAL,CAAa,SAAb,EAAwB,MAAxB,CAAP;AACA,MAAIqB,KAAK,GAAG,IAAInB,MAAJ,CAAW,SAASkB,IAAT,GAAgB,mBAA3B,CAAZ;AAAA,MACEE,OAAO,GAAGD,KAAK,CAAClB,IAAN,CAAWN,GAAX,CADZ;AAEA,MAAI,CAACyB,OAAL,EAAc,OAAO,IAAP;AACd,MAAI,CAACA,OAAO,CAAC,CAAD,CAAZ,EAAiB,OAAO,EAAP;AACjB,SAAOC,kBAAkB,CAACD,OAAO,CAAC,CAAD,CAAP,CAAWtB,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAAzB;AACD,CAPM","sourcesContent":["import JSEncrypt from 'jsencrypt'\nconst __pubkey__ = `MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAhSazxfY8JCDU4Ihza5VII7Ku4NpAbtYn8MMcHQCGdc8nauWKOeLqMO6+nrex+eirwo9Ac4v2FXli3nbj3BaCENHVOUBeVJQbbplUeUS8quei+ihgoQMLkc8pLDOdYt+XeH30XeRxHfQNx2fx4yUdWVLbpwzuQIP8ACh8Lx3rNteMTAosNVnkBUQAkJ3zmuY2N01IxlBRwZpdxmJPmWafKfoF535UVKT+bV9Ce7LRzWB1dF2X9b2/ektKgLifQd9o6laGX79f9CshZ9u0nT3XDvHnCF3rKfLYDgNfkwcCrMWeuJ7EVMW4Mx5VjY0pY0mxFi+t6NA5rk/IAPDstI3W0QIDAQAB`\n\n// 全站加密\nexport const setEncrypt = (str = '', publicKey = __pubkey__) => {\n  const encrypt = new JSEncrypt();\n  encrypt.setPublicKey(publicKey);\n  return encrypt.encrypt(str);\n}\n// 判断是否为全站\nexport const isApp = () => {\n  return !verifyUrlParams('username')\n}\n// 验证url传参\nexport const verifyUrlParams = (key, url = location.href) => {\n  key = key.replace(/[\\[\\]]/g, \"\\\\$&\");\n  const reg = new RegExp(`[\\\\?&]${key}(=([^&#]*)|&|#|$)`)\n  return reg.exec(url)\n}\n\nexport const getUsernameByPlatform = () => {\n  // 初始化用户名\n  let username = ''\n  // 全站获取用户名\n  if (isApp()) {\n    if (window.ios) {\n      username = window.ios.getUserName()\n    }\n    if (window.android) {\n      username = window.android.getUserName()\n    }\n    // 加密\n    if (username) {\n      username = setEncrypt(username)\n    }\n\n  } else {// h5获取用户名\n    let result = verifyUrlParams('username')\n    console.log('result', result)\n    // if (result && result[2]) {\n    //   username = decodeURIComponent(result[2].replace(/\\+/g, \" \"))\n    // }\n    if (result && result[2]) {\n      username = result[2]\n      if (username.indexOf('?noCache=') > -1) {\n        username = username.split('?noCache=')[0]\n      }\n    }\n    console.log(username)\n  }\n  return username\n}\n\nexport const getUrlParams = (url = location.href) => {\n  const Params = {}\n  url.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\n    Params[key] = value\n  })\n  return Params\n}\n\n// 获取url中的传参\nexport const getQueryString = (name, url = location.href) => {\n  name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n  var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n    results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}"]}]}